<?php
//ini_set('session.save_path', '/tmp');
//session_start();

// --- ðŸŒ Aiven & Render MySQL Connection ---
$host = getenv('DB_HOST');
$port = getenv('DB_PORT');
$user = getenv('DB_USER');
$pass = getenv('DB_PASS');
$db   = getenv('DB_NAME');
$ca_content = getenv('DB_CA_CERT');

// ðŸ”’ à¹€à¸‚à¸µà¸¢à¸™à¹„à¸Ÿà¸¥à¹Œ CA à¸Šà¸±à¹ˆà¸§à¸„à¸£à¸²à¸§
if (!$ca_content) {
    die("âŒ Missing DB_CA_CERT environment variable");
}

$tmp_ca = tempnam(sys_get_temp_dir(), 'ca_');
file_put_contents($tmp_ca, $ca_content);

$conn = mysqli_init();
if (!$conn) {
    die("âŒ Error: mysqli_init failed");
}

// âœ… à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² SSL à¹‚à¸”à¸¢à¹ƒà¸Šà¹‰ CA à¸ˆà¸²à¸ environment
mysqli_ssl_set($conn, NULL, NULL, $tmp_ca, NULL, NULL);

if (
    !mysqli_real_connect(
        $conn,
        $host,
        $user,
        $pass,
        $db,
        (int)$port,
        NULL,
        MYSQLI_CLIENT_SSL
    )
) {
    die("âŒ Connection Failed: " . mysqli_connect_error());
}

// â€¼ï¸ [à¹à¸à¹‰à¹„à¸‚à¹à¸¥à¹‰à¸§] â€¼ï¸
// à¸¥à¸šà¸šà¸£à¸£à¸—à¸±à¸” 'echo "âœ… Connected..."' à¸—à¸´à¹‰à¸‡
// à¹€à¸žà¸£à¸²à¸°à¸¡à¸±à¸™à¸—à¸³à¹ƒà¸«à¹‰à¹€à¸à¸´à¸” Error "headers already sent"
// à¹à¸¥à¸°à¸‚à¸±à¸”à¸‚à¸§à¸²à¸‡à¸à¸²à¸£ Login à¸„à¸£à¸±à¸š

?>
